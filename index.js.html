<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>ZEST &#x276d; base.resolver-cli &#x276d; Source: index.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">ZEST &#x276d; base.resolver-cli &#x276d; Source: index.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>'use strict';
/**
 * @fileOverview The base.resolver-cli is a command line wrapper around &lt;b>base.resolver&lt;/b>
 * @module base-resolver-cli
 * @requires base-resolver
 * @requires liftoff
 * @requires commander
 */
var Liftoff = require('liftoff'),
    Resolver = new Liftoff({
        name: 'zest resolver',
        moduleName: 'base.resolver',
        configName: 'zest',
        extensions: {
            '.js': null,
            '.json': null
        }
    }),
    program = require('commander').version(
            '0.0.1'
        ).option(
            '-d, --directory [base directory]',
            'The current base directory. zest components are searched relative to this directory. If not specified, ' +
            'the component paths in the zest configuration file are assumed to be relative to the configuration file ' +
            'itself.'
        ).option(
            '-f, --file [configuration file]',
            'The zest resolver configuration file path. If this is not set, the configuration file should be in the ' +
            'current working directory or in the folder hierarchy and should have a name of zest.json or zest.js'
        ).option(
            '-l, --log [log level]',
            'The zest logging level. Possible values are log, info, warn, error and none'
        ),
    referDocs = function () {
        console.log();
        console.log(
            'For more information about installing and configuring base.resolver, please see the base.resolver ' +
            'documentation:'
        );
        console.log('    https://github.com/zest/base.resolver/blob/master/README.md');
        console.log();
    };
program.on('--help', function(){
    console.log('resolver command is a command line interface for running base.resolver.');
    console.log('The allowed configurations are listed above.');
    referDocs();

});
program.parse(process.argv);
Resolver.launch(
    {
        cwd: program.directory,
        configPath: program.file
    },
    function (env) {
        if(!env.modulePath) {
            console.error('Fatal error: Unable to find local \'base.resolver\'.');
            console.error();
            console.error(
                'If you\'re seeing this message, base.resolver hasn\'t been installed locally to your project.'
            );
            referDocs();
            process.exit(1);
        } else if(!env.configPath) {
            console.error('Fatal error: Unable to find a local configuration.');
            console.error();
            console.error(
                'If you\'re seeing this message, you are missing a zest.json (or .js) file in your project.'
            );
            referDocs();
            process.exit(1);
        } else {
            if(program.log) {
                var path = require('path');
                require(path.join(path.dirname(env.modulePath), '../node_modules/base.logger')).configure([{
                    level: program.log
                }]);
            }
            require(env.modulePath)(env.configPath, env.cwd).then(function (resolver) {
                resolver.load().then(function () {
                    process.on('SIGINT', function() {
                        resolver.unload();
                    });
                });
            }).done();
        }
    }
);
</code></pre>
        </article>
    </section>




    <footer>
        <a href="http://zest.github.io/base.resolver/">base.resolver</a>  | <a href="http://zest.github.io/base.resolver-cli/">base.resolver-cli</a>  | <a href="http://zest.github.io/base.logger/">base.logger</a>  | <a href="http://zest.github.io/base.gruntrunner/">base.gruntrunner</a>  | <a href="http://zest.github.io/datastore.mongo/">datastore.mongo</a>  | <a href="http://zest.github.io/filestore.disk/">filestore.disk</a>  | <a href="http://zest.github.io/privilege.datastore/">privilege.datastore</a>  | <a href="http://zest.github.io/user.datastore/">user.datastore</a>  | <a href="http://zest.github.io/application.rest/">application.rest</a>  | <a href="http://zest.github.io/integration.embodier/">integration.embodier</a> 
    </footer>
</div>

<nav>
    <h2><a href="index.html">base.resolver-cli</a></h2><h3>Modules</h3><ul><li><a href="module-base-resolver-cli.html">base-resolver-cli</a></li></ul>
</nav>
<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
